---
title: UIScript System
---

The UIScript system allows you to create visual parameter panels for custom shaders, making it easy for artists and designers to adjust material properties without writing code. This tutorial will teach you how to create and use UIScript.

## What is UIScript

UIScript is a JavaScript-based script system that defines the user interface for shader parameters. It allows you to:
- Create visual parameter controls (sliders, color pickers, checkboxes, etc.)
- Set parameter ranges and default values
- Group related parameters
- Add parameter descriptions and tooltips

## Basic UIScript Structure

A basic UIScript file structure:

```javascript
/**
 * @title Custom Material
 * @author Your Name
 */
export const UIScript = {
  // Material property definitions
  properties: [
    {
      target: "material_BaseColor",
      type: "Color",
      default: [1, 1, 1, 1],
      title: "Base Color"
    },
    {
      target: "material_BaseTexture", 
      type: "Texture2D",
      title: "Base Texture"
    }
  ]
};
```

## Property Types

UIScript supports various property types:

### Basic Types

```javascript
// Float slider
{
  target: "material_Metallic",
  type: "Float",
  default: 0.0,
  range: [0, 1],
  title: "Metallic"
}

// Integer input
{
  target: "material_Steps",
  type: "Int", 
  default: 5,
  range: [1, 10],
  title: "Steps"
}

// Boolean checkbox
{
  target: "ENABLE_NORMAL_MAP",
  type: "Boolean",
  default: false,
  title: "Enable Normal Map"
}
```

### Vector Types

```javascript
// Vector2
{
  target: "material_Tiling",
  type: "Vector2",
  default: [1, 1],
  title: "Texture Tiling"
}

// Vector3
{
  target: "material_Position",
  type: "Vector3", 
  default: [0, 0, 0],
  title: "Position"
}

// Vector4
{
  target: "material_TilingOffset",
  type: "Vector4",
  default: [1, 1, 0, 0],
  title: "Tiling & Offset"
}
```

### Color and Texture

```javascript
// Color picker
{
  target: "material_EmissiveColor",
  type: "Color",
  default: [0, 0, 0, 1],
  title: "Emissive Color"
}

// Texture selector
{
  target: "material_NormalTexture",
  type: "Texture2D", 
  title: "Normal Map"
}

// Cube texture
{
  target: "material_EnvTexture",
  type: "TextureCube",
  title: "Environment Map"
}
```

## Advanced Features

### Parameter Grouping

```javascript
export const UIScript = {
  properties: [
    // Basic group
    {
      type: "header",
      title: "Basic Properties"
    },
    {
      target: "material_BaseColor",
      type: "Color",
      default: [1, 1, 1, 1],
      title: "Base Color"
    },
    {
      target: "material_BaseTexture",
      type: "Texture2D",
      title: "Base Texture"
    },
    
    // Advanced group
    {
      type: "header", 
      title: "Advanced Properties"
    },
    {
      target: "material_Metallic",
      type: "Float",
      default: 0.0,
      range: [0, 1],
      title: "Metallic"
    }
  ]
};
```

### Conditional Display

```javascript
// Show/hide parameters based on conditions
{
  target: "material_NormalIntensity",
  type: "Float",
  default: 1.0,
  range: [0, 2],
  title: "Normal Intensity",
  // Only show when normal map is enabled
  condition: "ENABLE_NORMAL_MAP"
}
```

### Custom Validation

```javascript
{
  target: "material_Roughness",
  type: "Float", 
  default: 0.5,
  range: [0.01, 1.0],  // Prevent zero values
  title: "Roughness",
  tooltip: "Surface roughness, 0 = mirror, 1 = completely rough"
}
```

## Complete Example

Here's a complete UIScript for a PBR-style material:

```javascript
/**
 * @title PBR Material
 * @author Galacean Team
 * @description A physically based rendering material
 */
export const UIScript = {
  properties: [
    // === Basic Properties ===
    {
      type: "header",
      title: "Basic Properties"
    },
    {
      target: "material_BaseColor",
      type: "Color", 
      default: [1, 1, 1, 1],
      title: "Base Color",
      tooltip: "The main color of the material"
    },
    {
      target: "material_BaseTexture",
      type: "Texture2D",
      title: "Base Texture"
    },
    {
      target: "material_TilingOffset",
      type: "Vector4",
      default: [1, 1, 0, 0], 
      title: "Tiling & Offset",
      tooltip: "XY: Tiling, ZW: Offset"
    },
    
    // === PBR Properties ===
    {
      type: "header",
      title: "PBR Properties"
    },
    {
      target: "material_Metallic",
      type: "Float",
      default: 0.0,
      range: [0, 1],
      title: "Metallic"
    },
    {
      target: "material_Roughness", 
      type: "Float",
      default: 0.5,
      range: [0.01, 1],
      title: "Roughness"
    },
    {
      target: "material_MetallicRoughnessTexture",
      type: "Texture2D",
      title: "Metallic Roughness Map",
      tooltip: "R: Metallic, G: Roughness"
    },
    
    // === Normal Mapping ===
    {
      type: "header",
      title: "Normal Mapping"
    },
    {
      target: "ENABLE_NORMAL_MAP",
      type: "Boolean",
      default: false,
      title: "Enable Normal Map"
    },
    {
      target: "material_NormalTexture",
      type: "Texture2D", 
      title: "Normal Map",
      condition: "ENABLE_NORMAL_MAP"
    },
    {
      target: "material_NormalIntensity",
      type: "Float",
      default: 1.0,
      range: [0, 2],
      title: "Normal Intensity",
      condition: "ENABLE_NORMAL_MAP"
    },
    
    // === Emission ===
    {
      type: "header",
      title: "Emission"
    },
    {
      target: "material_EmissiveColor",
      type: "Color",
      default: [0, 0, 0, 1],
      title: "Emissive Color"
    },
    {
      target: "material_EmissiveTexture",
      type: "Texture2D",
      title: "Emissive Map"
    },
    {
      target: "material_EmissiveIntensity",
      type: "Float", 
      default: 1.0,
      range: [0, 10],
      title: "Emissive Intensity"
    }
  ]
};
```

## Macro Definitions

UIScript can also control shader macros:

```javascript
// In UIScript
{
  target: "USE_VERTEX_COLOR",
  type: "Boolean",
  default: false,
  title: "Use Vertex Color"
}

// In Shader
#ifdef USE_VERTEX_COLOR
  vec4 vertexColor = input.COLOR_0;
  finalColor *= vertexColor;
#endif
```

## Dynamic Parameter Updates

UIScript supports dynamic parameter updates:

```javascript
{
  target: "material_AnimationSpeed",
  type: "Float",
  default: 1.0,
  range: [0, 5],
  title: "Animation Speed",
  // Real-time update callback
  onChange: (value) => {
    // Custom logic when parameter changes
    console.log(`Animation speed changed to: ${value}`);
  }
}
```

## Best Practices

### 1. Clear Parameter Organization
```javascript
// Good: Use headers to group related parameters
{
  type: "header",
  title: "Surface Properties"
},
// Related parameters...

{
  type: "header", 
  title: "Animation Properties"
},
// Animation parameters...
```

### 2. Meaningful Names and Tooltips
```javascript
// Good: Clear names and helpful tooltips
{
  target: "material_WaveAmplitude",
  type: "Float",
  title: "Wave Amplitude", 
  tooltip: "Controls the height of the wave effect"
}
```

### 3. Reasonable Default Values
```javascript
// Good: Set reasonable defaults
{
  target: "material_Roughness",
  type: "Float",
  default: 0.5,  // Mid-range default
  range: [0.01, 1.0]
}
```

### 4. Appropriate Ranges
```javascript
// Good: Prevent invalid values
{
  target: "material_Metallic",
  type: "Float", 
  default: 0.0,
  range: [0, 1],  // Physically correct range
  title: "Metallic"
}
```

## Integration with Shader

UIScript parameters automatically map to shader variables:

```glsl
// In Shader
Shader "Custom/MyMaterial" {
  SubShader "Default" {
    Pass "Forward" {
      // These variables are automatically available
      vec4 material_BaseColor;
      sampler2D material_BaseTexture;
      float material_Metallic;
      float material_Roughness;
      
      // Macros are automatically defined
      #ifdef ENABLE_NORMAL_MAP
        sampler2D material_NormalTexture;
        float material_NormalIntensity;
      #endif
      
      // Shader code...
    }
  }
}
```

## Running Effect

This UIScript system will:
1. Generate a visual parameter panel in the material editor
2. Allow real-time adjustment of material properties
3. Automatically sync parameter changes to the shader
4. Provide organized, user-friendly interface for artists

Go to [Playground](/examples/shaderlab-03-ui-script) to experience the effect.